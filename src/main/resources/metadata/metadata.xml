<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<ComponentMetadata ComponentId="ctype::Adapter/cname::Dropbox/vendor::sap.custom/version::1.0.0" 
                   ComponentName="Dropbox"
                   UIElementType="Adapter" 
                   IsExtension="true" 
                   IsFinal="true" 
                   IsPreserves="true"
                   IsDefaultGenerator="true" 
                   ComponentDisplayName="Dropbox Adapter"
                   xmlns:gen="http://www.sap.hci.adk.com/gen">
    
    <!-- Sender Adapter Configuration -->
    <Variant VariantName="Dropbox Sender"
             VariantId="ctype::AdapterVariant/cname::Dropbox/vendor::sap.custom/tp::sap-dropbox/mp::sap-dropbox/direction::Sender"
             MetadataVersion="2.0" 
             gen:RuntimeComponentBaseUri="sap-dropbox" 
             AttachmentBehavior="Preserve">
        <InputContent Cardinality="1" Scope="outsidepool" MessageCardinality="1" isStreaming="false">
            <Content>
                <ContentType>Any</ContentType>
                <Schema xsi:type="xs:string" xmlns:xs="http://www.w3.org/2001/XMLSchema"
                        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
            </Content>
        </InputContent>
        <OutputContent Cardinality="1" Scope="outsidepool" MessageCardinality="1" isStreaming="false">
            <Content>
                <ContentType>Any</ContentType>
                <Schema xsi:type="xs:string" xmlns:xs="http://www.w3.org/2001/XMLSchema"
                        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
            </Content>
        </OutputContent>
        
        <Tab id="connection">
            <GuiLabels guid="b4c970da-a1f8-443c-b063-046773f93135">
                <Label language="EN">Connection</Label>
            </GuiLabels>
            <AttributeGroup id="connectionSettings">
                <Name xsi:type="xs:string" xmlns:xs="http://www.w3.org/2001/XMLSchema"
                      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">Connection Settings</Name>
                <GuiLabels guid="041a3129-aedb-4e5b-a351-dc8d82ae7fbc">
                    <Label language="EN">Connection Settings</Label>
                </GuiLabels>
                <AttributeReference>
                    <ReferenceName>credentialName</ReferenceName>
                    <description>OAuth2 credential alias name from Security Material</description>
                </AttributeReference>
                <AttributeReference>
                    <ReferenceName>timeout</ReferenceName>
                    <description>Timeout in milliseconds</description>
                </AttributeReference>
            </AttributeGroup>
        </Tab>
        
        <Tab id="processing">
            <GuiLabels guid="eaa0dc7f-e350-44ae-85bf-6a7a46853302">
                <Label language="EN">Processing</Label>
            </GuiLabels>
            <AttributeGroup id="operationSettings">
                <Name xsi:type="xs:string" xmlns:xs="http://www.w3.org/2001/XMLSchema"
                      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">Operation Settings</Name>
                <GuiLabels guid="d5f0f7b0-5463-4eae-af69-e7d13dabbc18">
                    <Label language="EN">Operation Settings</Label>
                </GuiLabels>
                <AttributeReference>
                    <ReferenceName>operation</ReferenceName>
                    <description>Dropbox operation to perform</description>
                </AttributeReference>
                <AttributeReference>
                    <ReferenceName>filePath</ReferenceName>
                    <description>File path for download operation</description>
                </AttributeReference>
                <AttributeReference>
                    <ReferenceName>folderPath</ReferenceName>
                    <description>Folder path for download archive operation</description>
                </AttributeReference>
            </AttributeGroup>
            <AttributeGroup id="postProcessing">
                <Name xsi:type="xs:string" xmlns:xs="http://www.w3.org/2001/XMLSchema"
                      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">Post-Processing</Name>
                <GuiLabels guid="813cbd00-ea82-47a9-8302-bf16aa6727b9">
                    <Label language="EN">Post-Processing</Label>
                </GuiLabels>
                <AttributeReference>
                    <ReferenceName>postProcessing</ReferenceName>
                    <description>Post-processing action after successful file processing</description>
                </AttributeReference>
                <AttributeReference>
                    <ReferenceName>archiveDirectory</ReferenceName>
                    <description>Archive directory path for move operation</description>
                </AttributeReference>
                <AttributeReference>
                    <ReferenceName>raiseExceptionOnPostProcessingFailure</ReferenceName>
                    <description>Raise exception if post-processing fails</description>
                </AttributeReference>
                <AttributeReference>
                    <ReferenceName>persistDuration</ReferenceName>
                    <description>Persist duration in days for idempotent repository</description>
                </AttributeReference>
            </AttributeGroup>
            <AttributeGroup id="scheduler">
                <Name xsi:type="xs:string" xmlns:xs="http://www.w3.org/2001/XMLSchema"
                      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">Scheduler</Name>
                <GuiLabels guid="813cbd00-ea82-47a9-8302-bf16aa6727b0">
                    <Label language="EN">Scheduler</Label>
                </GuiLabels>
                <AttributeReference>
                    <ReferenceName>delay</ReferenceName>
                    <description>Polling delay in milliseconds</description>
                </AttributeReference>
                <AttributeReference>
                    <ReferenceName>initialDelay</ReferenceName>
                    <description>Initial delay before first poll</description>
                </AttributeReference>
            </AttributeGroup>
        </Tab>
    </Variant>
    
    <!-- Receiver Adapter Configuration -->
    <Variant VariantName="Dropbox Receiver"
             VariantId="ctype::AdapterVariant/cname::Dropbox/vendor::sap.custom/tp::sap-dropbox/mp::sap-dropbox/direction::Receiver"
             IsRequestResponse="true" 
             MetadataVersion="2.0" 
             gen:RuntimeComponentBaseUri="sap-dropbox"
             AttachmentBehavior="Preserve">
        <InputContent Cardinality="1" Scope="outsidepool" MessageCardinality="1" isStreaming="false">
            <Content>
                <ContentType>Any</ContentType>
                <Schema xsi:type="xs:string" xmlns:xs="http://www.w3.org/2001/XMLSchema"
                        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
            </Content>
        </InputContent>
        <OutputContent Cardinality="1" Scope="outsidepool" MessageCardinality="1" isStreaming="false">
            <Content>
                <ContentType>Any</ContentType>
                <Schema xsi:type="xs:string" xmlns:xs="http://www.w3.org/2001/XMLSchema"
                        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
            </Content>
        </OutputContent>
        
        <Tab id="connection">
            <GuiLabels guid="484b8319-7d64-49f9-bef9-d47a419b6446">
                <Label language="EN">Connection</Label>
            </GuiLabels>
            <AttributeGroup id="connectionSettings">
                <Name xsi:type="xs:string" xmlns:xs="http://www.w3.org/2001/XMLSchema"
                      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">Connection Settings</Name>
                <GuiLabels guid="55e2764d-9161-43a1-ad8d-28f198d3fdf1">
                    <Label language="EN">Connection Settings</Label>
                </GuiLabels>
                <AttributeReference>
                    <ReferenceName>credentialName</ReferenceName>
                    <description>OAuth2 credential alias name from Security Material</description>
                </AttributeReference>
                <AttributeReference>
                    <ReferenceName>timeout</ReferenceName>
                    <description>Timeout in milliseconds</description>
                </AttributeReference>
            </AttributeGroup>
        </Tab>
        
        <Tab id="processing">
            <GuiLabels guid="d5f0f7b0-5463-4eae-af69-e7d13dabbc19">
                <Label language="EN">Processing</Label>
            </GuiLabels>
            <AttributeGroup id="operationSettings">
                <Name xsi:type="xs:string" xmlns:xs="http://www.w3.org/2001/XMLSchema"
                      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">Operation Settings</Name>
                <GuiLabels guid="d5f0f7b0-5463-4eae-af69-e7d13dabbc20">
                    <Label language="EN">Operation Settings</Label>
                </GuiLabels>
                <AttributeReference>
                    <ReferenceName>operation</ReferenceName>
                    <description>Dropbox operation to perform</description>
                </AttributeReference>
                <AttributeReference>
                    <ReferenceName>sourcePath</ReferenceName>
                    <description>Source path for copy/move operations</description>
                </AttributeReference>
                <AttributeReference>
                    <ReferenceName>destinationPath</ReferenceName>
                    <description>Destination path for copy/move operations</description>
                </AttributeReference>
                <AttributeReference>
                    <ReferenceName>filePath</ReferenceName>
                    <description>File path for operations</description>
                </AttributeReference>
                <AttributeReference>
                    <ReferenceName>folderPath</ReferenceName>
                    <description>Folder path for operations</description>
                </AttributeReference>
                <AttributeReference>
                    <ReferenceName>handlingExistingFiles</ReferenceName>
                    <description>How to handle existing files</description>
                </AttributeReference>
                <AttributeReference>
                    <ReferenceName>query</ReferenceName>
                    <description>Search query string</description>
                </AttributeReference>
                <AttributeReference>
                    <ReferenceName>limit</ReferenceName>
                    <description>Limit for list operations</description>
                </AttributeReference>
                <AttributeReference>
                    <ReferenceName>recursive</ReferenceName>
                    <description>Recursive listing for folders</description>
                </AttributeReference>
                <AttributeReference>
                    <ReferenceName>responseFormat</ReferenceName>
                    <description>Response format (JSON or XML)</description>
                </AttributeReference>
            </AttributeGroup>
        </Tab>
    </Variant>
    
    <!-- Attribute Metadata Definitions -->
    <AttributeMetadata>
        <Name>credentialName</Name>
        <Usage>true</Usage>
        <DataType>xsd:string</DataType>
        <Default/>
        <Length/>
        <isparameterized>true</isparameterized>
        <GuiLabels guid="239dd7c8-61ce-4ced-8037-437d688257f1">
            <Label language="EN">Credential Name</Label>
        </GuiLabels>
    </AttributeMetadata>
    
    <AttributeMetadata>
        <Name>timeout</Name>
        <Usage>false</Usage>
        <DataType>xsd:integer</DataType>
        <Default>300000</Default>
        <Length/>
        <isparameterized>true</isparameterized>
        <GuiLabels guid="239dd7c8-61ce-4ced-8037-437d688257f2">
            <Label language="EN">Timeout (ms)</Label>
        </GuiLabels>
    </AttributeMetadata>
    
    <AttributeMetadata>
        <Name>operation</Name>
        <Usage>true</Usage>
        <DataType>xsd:string</DataType>
        <Default/>
        <Length/>
        <isparameterized>false</isparameterized>
        <GuiLabels guid="239dd7c8-61ce-4ced-8037-437d688257f3">
            <Label language="EN">Operation</Label>
        </GuiLabels>
        <FixedValues>
            <FixedValue>
                <Value>Download</Value>
                <GuiLabels guid="352deeac-432f-45d1-927e-781c5c0289f1">
                    <Label language="EN">Download File</Label>
                </GuiLabels>
            </FixedValue>
            <FixedValue>
                <Value>Download_Archive</Value>
                <GuiLabels guid="352deeac-432f-45d1-927e-781c5c0289f2">
                    <Label language="EN">Download Archive</Label>
                </GuiLabels>
            </FixedValue>
            <FixedValue>
                <Value>Upload</Value>
                <GuiLabels guid="352deeac-432f-45d1-927e-781c5c0289f3">
                    <Label language="EN">Upload File</Label>
                </GuiLabels>
            </FixedValue>
            <FixedValue>
                <Value>Copy</Value>
                <GuiLabels guid="352deeac-432f-45d1-927e-781c5c0289f4">
                    <Label language="EN">Copy File or Folder</Label>
                </GuiLabels>
            </FixedValue>
            <FixedValue>
                <Value>Move</Value>
                <GuiLabels guid="352deeac-432f-45d1-927e-781c5c0289f5">
                    <Label language="EN">Move File or Folder</Label>
                </GuiLabels>
            </FixedValue>
            <FixedValue>
                <Value>Delete</Value>
                <GuiLabels guid="352deeac-432f-45d1-927e-781c5c0289f6">
                    <Label language="EN">Delete File or Folder</Label>
                </GuiLabels>
            </FixedValue>
            <FixedValue>
                <Value>Create_Folder</Value>
                <GuiLabels guid="352deeac-432f-45d1-927e-781c5c0289f7">
                    <Label language="EN">Create Folder</Label>
                </GuiLabels>
            </FixedValue>
            <FixedValue>
                <Value>List_Folder</Value>
                <GuiLabels guid="352deeac-432f-45d1-927e-781c5c0289f8">
                    <Label language="EN">List Folder</Label>
                </GuiLabels>
            </FixedValue>
            <FixedValue>
                <Value>Search</Value>
                <GuiLabels guid="352deeac-432f-45d1-927e-781c5c0289f9">
                    <Label language="EN">Search Files or Folders</Label>
                </GuiLabels>
            </FixedValue>
            <FixedValue>
                <Value>Get_Metadata</Value>
                <GuiLabels guid="352deeac-432f-45d1-927e-781c5c0289fa">
                    <Label language="EN">Get Metadata</Label>
                </GuiLabels>
            </FixedValue>
            <FixedValue>
                <Value>Get_File_URL</Value>
                <GuiLabels guid="352deeac-432f-45d1-927e-781c5c0289fb">
                    <Label language="EN">Get File URL</Label>
                </GuiLabels>
            </FixedValue>
            <FixedValue>
                <Value>Get_Storage_Statistics</Value>
                <GuiLabels guid="352deeac-432f-45d1-927e-781c5c0289fc">
                    <Label language="EN">Get Storage Statistics</Label>
                </GuiLabels>
            </FixedValue>
            <FixedValue>
                <Value>List_Revisions</Value>
                <GuiLabels guid="352deeac-432f-45d1-927e-781c5c0289fd">
                    <Label language="EN">List Revisions</Label>
                </GuiLabels>
            </FixedValue>
            <FixedValue>
                <Value>Update_Metadata</Value>
                <GuiLabels guid="352deeac-432f-45d1-927e-781c5c0289fe">
                    <Label language="EN">Update Metadata</Label>
                </GuiLabels>
            </FixedValue>
        </FixedValues>
    </AttributeMetadata>
    
    <AttributeMetadata>
        <Name>filePath</Name>
        <Usage>false</Usage>
        <DataType>xsd:string</DataType>
        <Default/>
        <Length/>
        <isparameterized>true</isparameterized>
        <GuiLabels guid="239dd7c8-61ce-4ced-8037-437d688257f4">
            <Label language="EN">File Path</Label>
        </GuiLabels>
    </AttributeMetadata>
    
    <AttributeMetadata>
        <Name>folderPath</Name>
        <Usage>false</Usage>
        <DataType>xsd:string</DataType>
        <Default/>
        <Length/>
        <isparameterized>true</isparameterized>
        <GuiLabels guid="239dd7c8-61ce-4ced-8037-437d688257f5">
            <Label language="EN">Folder Path</Label>
        </GuiLabels>
    </AttributeMetadata>
    
    <AttributeMetadata>
        <Name>postProcessing</Name>
        <Usage>false</Usage>
        <DataType>xsd:string</DataType>
        <Default>KeepAndProcess</Default>
        <Length/>
        <isparameterized>false</isparameterized>
        <GuiLabels guid="239dd7c8-61ce-4ced-8037-437d688257f6">
            <Label language="EN">Post-Processing</Label>
        </GuiLabels>
        <FixedValues>
            <FixedValue>
                <Value>Delete</Value>
                <GuiLabels guid="352deeac-432f-45d1-927e-781c5c028901">
                    <Label language="EN">Delete File</Label>
                </GuiLabels>
            </FixedValue>
            <FixedValue>
                <Value>Archive</Value>
                <GuiLabels guid="352deeac-432f-45d1-927e-781c5c028902">
                    <Label language="EN">Move to Archive</Label>
                </GuiLabels>
            </FixedValue>
            <FixedValue>
                <Value>KeepAndProcess</Value>
                <GuiLabels guid="352deeac-432f-45d1-927e-781c5c028903">
                    <Label language="EN">Keep and Process Again</Label>
                </GuiLabels>
            </FixedValue>
            <FixedValue>
                <Value>KeepAndMark</Value>
                <GuiLabels guid="352deeac-432f-45d1-927e-781c5c028904">
                    <Label language="EN">Keep and Mark as Processed</Label>
                </GuiLabels>
            </FixedValue>
        </FixedValues>
    </AttributeMetadata>
    
    <AttributeMetadata>
        <Name>archiveDirectory</Name>
        <Usage>false</Usage>
        <DataType>xsd:string</DataType>
        <Default/>
        <Length/>
        <isparameterized>true</isparameterized>
        <GuiLabels guid="239dd7c8-61ce-4ced-8037-437d688257f7">
            <Label language="EN">Archive Directory</Label>
        </GuiLabels>
    </AttributeMetadata>
    
    <AttributeMetadata>
        <Name>raiseExceptionOnPostProcessingFailure</Name>
        <Usage>false</Usage>
        <DataType>xsd:boolean</DataType>
        <Default>false</Default>
        <Length/>
        <isparameterized>true</isparameterized>
        <GuiLabels guid="239dd7c8-61ce-4ced-8037-437d688257f8">
            <Label language="EN">Raise Exception on Post-Processing Failure</Label>
        </GuiLabels>
    </AttributeMetadata>
    
    <AttributeMetadata>
        <Name>persistDuration</Name>
        <Usage>false</Usage>
        <DataType>xsd:integer</DataType>
        <Default>90</Default>
        <Length/>
        <isparameterized>true</isparameterized>
        <GuiLabels guid="239dd7c8-61ce-4ced-8037-437d688257f9">
            <Label language="EN">Persist Duration (Days)</Label>
        </GuiLabels>
    </AttributeMetadata>
    
    <AttributeMetadata>
        <Name>sourcePath</Name>
        <Usage>false</Usage>
        <DataType>xsd:string</DataType>
        <Default/>
        <Length/>
        <isparameterized>true</isparameterized>
        <GuiLabels guid="239dd7c8-61ce-4ced-8037-437d688257fa">
            <Label language="EN">Source Path</Label>
        </GuiLabels>
    </AttributeMetadata>
    
    <AttributeMetadata>
        <Name>destinationPath</Name>
        <Usage>false</Usage>
        <DataType>xsd:string</DataType>
        <Default/>
        <Length/>
        <isparameterized>true</isparameterized>
        <GuiLabels guid="239dd7c8-61ce-4ced-8037-437d688257fb">
            <Label language="EN">Destination Path</Label>
        </GuiLabels>
    </AttributeMetadata>
    
    <AttributeMetadata>
        <Name>handlingExistingFiles</Name>
        <Usage>false</Usage>
        <DataType>xsd:string</DataType>
        <Default>Fail</Default>
        <Length/>
        <isparameterized>false</isparameterized>
        <GuiLabels guid="239dd7c8-61ce-4ced-8037-437d688257fc">
            <Label language="EN">Handling Existing Files</Label>
        </GuiLabels>
        <FixedValues>
            <FixedValue>
                <Value>AutoRename</Value>
                <GuiLabels guid="352deeac-432f-45d1-927e-781c5c028905">
                    <Label language="EN">Auto Rename</Label>
                </GuiLabels>
            </FixedValue>
            <FixedValue>
                <Value>Fail</Value>
                <GuiLabels guid="352deeac-432f-45d1-927e-781c5c028906">
                    <Label language="EN">Fail</Label>
                </GuiLabels>
            </FixedValue>
            <FixedValue>
                <Value>Ignore</Value>
                <GuiLabels guid="352deeac-432f-45d1-927e-781c5c028907">
                    <Label language="EN">Ignore</Label>
                </GuiLabels>
            </FixedValue>
            <FixedValue>
                <Value>Overwrite</Value>
                <GuiLabels guid="352deeac-432f-45d1-927e-781c5c028908">
                    <Label language="EN">Overwrite</Label>
                </GuiLabels>
            </FixedValue>
            <FixedValue>
                <Value>Dynamic</Value>
                <GuiLabels guid="352deeac-432f-45d1-927e-781c5c028909">
                    <Label language="EN">Dynamic</Label>
                </GuiLabels>
            </FixedValue>
        </FixedValues>
    </AttributeMetadata>
    
    <AttributeMetadata>
        <Name>query</Name>
        <Usage>false</Usage>
        <DataType>xsd:string</DataType>
        <Default/>
        <Length/>
        <isparameterized>true</isparameterized>
        <GuiLabels guid="239dd7c8-61ce-4ced-8037-437d688257fd">
            <Label language="EN">Search Query</Label>
        </GuiLabels>
    </AttributeMetadata>
    
    <AttributeMetadata>
        <Name>limit</Name>
        <Usage>false</Usage>
        <DataType>xsd:integer</DataType>
        <Default>1000</Default>
        <Length/>
        <isparameterized>true</isparameterized>
        <GuiLabels guid="239dd7c8-61ce-4ced-8037-437d688257fe">
            <Label language="EN">Limit</Label>
        </GuiLabels>
    </AttributeMetadata>
    
    <AttributeMetadata>
        <Name>recursive</Name>
        <Usage>false</Usage>
        <DataType>xsd:boolean</DataType>
        <Default>false</Default>
        <Length/>
        <isparameterized>true</isparameterized>
        <GuiLabels guid="239dd7c8-61ce-4ced-8037-437d688257ff">
            <Label language="EN">Recursive</Label>
        </GuiLabels>
    </AttributeMetadata>
    
    <AttributeMetadata>
        <Name>responseFormat</Name>
        <Usage>false</Usage>
        <DataType>xsd:string</DataType>
        <Default>JSON</Default>
        <Length/>
        <isparameterized>false</isparameterized>
        <GuiLabels guid="239dd7c8-61ce-4ced-8037-437d68825800">
            <Label language="EN">Response Format</Label>
        </GuiLabels>
        <FixedValues>
            <FixedValue>
                <Value>JSON</Value>
                <GuiLabels guid="352deeac-432f-45d1-927e-781c5c02890a">
                    <Label language="EN">JSON</Label>
                </GuiLabels>
            </FixedValue>
            <FixedValue>
                <Value>XML</Value>
                <GuiLabels guid="352deeac-432f-45d1-927e-781c5c02890b">
                    <Label language="EN">XML</Label>
                </GuiLabels>
            </FixedValue>
        </FixedValues>
    </AttributeMetadata>
    
    <AttributeMetadata>
        <Name>delay</Name>
        <Usage>false</Usage>
        <DataType>xsd:long</DataType>
        <Default>60000</Default>
        <Length/>
        <isparameterized>true</isparameterized>
        <GuiLabels guid="a4f8a61b-7035-48e5-9ca8-6d2351620510">
            <Label language="EN">Delay (ms)</Label>
        </GuiLabels>
    </AttributeMetadata>
    
    <AttributeMetadata>
        <Name>initialDelay</Name>
        <Usage>false</Usage>
        <DataType>xsd:long</DataType>
        <Default>1000</Default>
        <Length/>
        <isparameterized>true</isparameterized>
        <GuiLabels guid="a00ea23c-4fdc-4976-b4ea-8e12688bc556">
            <Label language="EN">Initial Delay (ms)</Label>
        </GuiLabels>
    </AttributeMetadata>
</ComponentMetadata>
